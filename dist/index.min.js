!function(factory){if("object"==typeof module&&"object"==typeof module.exports){var v=factory(require,exports);void 0!==v&&(module.exports=v)}else"function"==typeof define&&define.amd&&define(["require","exports"],factory)}(function(require,exports){"use strict";return function(options){var defaults={callback:function(){},offlineCallback:function(){},interval:500,maxTries:-1,navigator:window.navigator},_a=Object.assign({},defaults,options),callback=_a.callback,offlineCallback=_a.offlineCallback,interval=_a.interval,maxTries=_a.maxTries,navigator=_a.navigator,tries=0,resolveCallbackIfOnline=function(resolve,reject){return tries+=1,navigator.onLine?resolve(callback()):tries===maxTries?reject(offlineCallback()):void setTimeout(function(){return resolveCallbackIfOnline(resolve,reject)},interval)};return new Promise(function(resolve,reject){return resolveCallbackIfOnline(resolve,reject)})}});